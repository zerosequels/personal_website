<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeroSequels - Don't Repeat, Innovate.</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="background-layer-container">
        <div class="background-layer" id="bgLayer1"></div>
        <div class="background-layer" id="bgLayer2"></div>
        <canvas id="shaderCanvas"></canvas>
    </div>
    <header class="hero" id="home">
        <div class="hero-content">
            <h1>ZeroSequels</h1>
            <p class="tagline">Don't Repeat, Innovate.</p>
            <div class="hero-icons">
                <a href="https://github.com/zerosequels" target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                </a>
                <a href="https://x.com/nick_explores" target="_blank" rel="noopener noreferrer" aria-label="X Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
                <a href="https://www.linkedin.com/in/nick-johnston-46b4b4364/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                </a>
                <a href="mailto:zerosequels@zerosequels.com" aria-label="Email">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M0 4v16h24V4H0zm21.8 1.5l-9.8 6.5-9.8-6.5h19.6zM1.5 18.5V6.9l10.5 7 10.5-7v11.6H1.5z"/></svg>
                </a>
            </div>
            <a href="#about" class="hero-button">Learn More</a>
        </div>
    </header>

    <!-- <main> tag removed -->
    <section id="about">
        <div class="section-content-wrapper">
                <h2>Welcome to Zero Sequels</h2>
            <p>We are an AI-powered digital creator consultancy dedicated to pushing the boundaries of innovation.</p>
            <p>At Zero Sequels, we believe in the power of originality. In a world saturated with repetition, our mission is to empower creators, businesses, and visionaries with artificial intelligence that fuels unique digital experiences. We don't just follow trends; we help you define new ones.</p>
            <p>Our expertise lies in leveraging cutting-edge AI technologies to develop custom solutions for content generation, interactive media, personalized user experiences, and much more. Whether you're looking to automate creative workflows, build intelligent digital products, or explore uncharted territories in digital interaction, Zero Sequels is your partner in innovation.</p>
            <p>We're not just consultants; we're collaborators. We work closely with you to understand your vision and transform it into reality, ensuring that every project is a step forward, not a look back.</p>
            </div>
        </section>

        <section id="developer">
            <div class="section-content-wrapper developer-section-wrapper">
                <h2>Meet the Developer</h2>
                <div class="developer-intro">
                    <img src="nick.jpg" alt="Nick Johnston - Lead Developer" class="dev-photo">
                    <div>
                        <h3>Nick Johnston</h3>
                        <p>I'm a dedicated Fullstack Engineer with over eight years of experience, passionate about building innovative solutions through self-driven learning and cutting-edge technologies. My expertise in AWS microservices, CI/CD pipelines, and AI tools like Cursor.ai and Claude:Sonnet has fueled impactful projects, from enterprise systems at Caterpillar Inc. to an indie game on Steam Early Access. Shaped by a global upbringing in China and Indonesia, I excel at collaboration and pushing technological boundaries.</p>
                    </div>
                </div>

                <div class="employment-history">
                    <h4>Employment Details</h4>
                    
                    <div class="job-entry">
                        <h5>Software Developer & Automation Engineer</h5>
                        <p class="job-meta">Zerosequels | April 2024 – Present (11 months)</p>
                        <ul>
                            <li>Developed a procedurally generated rogue-like tower defense game for Steam Early Access, integrating advanced AI tools (Cursor.ai, Claude:Sonnet, DeepSeek r:1) to enhance code quality and accelerate development.</li>
                            <li>Built an ML-based localization pipeline, translating UI into 10+ languages, and automated game UI icon generation using ComfyUI and Flux, reducing design workload by 80%.</li>
                            <li>Created an n8n-powered, AI-driven social media pipeline for Instagram and TikTok, automating content creation, audience engagement, and sentiment analysis to drive growth.</li>
                        </ul>
                    </div>

                    <div class="job-entry">
                        <h5>Senior Software Engineer</h5>
                        <p class="job-meta">Caterpillar Inc. | January 2018 – March 2024 (6 years 3 months)</p>
                        <ul>
                            <li>Designed and maintained IoT AWS-based microservices and managed RDS databases for high-performance enterprise applications.</li>
                            <li>Developed Spring Boot microservices to support scalable, enterprise-level solutions.</li>
                        </ul>
                    </div>

                    <div class="job-entry">
                        <h5>Technical Analyst</h5>
                        <p class="job-meta">Solstice | March 2017 – December 2017 (11 months)</p>
                        <ul>
                            <li>Built Kotlin-based microservices on Pivotal Cloud Platform for Blue Cross Blue Shield, ensuring HIPAA-compliant, secure, and reliable healthcare applications.</li>
                            <li>Managed CI/CD pipelines and infrastructure for efficient software releases.</li>
                        </ul>
                    </div>

                    <div class="job-entry">
                        <h5>Programmer Analyst</h5>
                        <p class="job-meta">LIDP Consulting Services, Inc. | January 2016 – March 2017 (9 months)</p>
                        <ul>
                            <li>Delivered Java enterprise solutions and maintained legacy Java EE systems for Titanium, a life insurance product.</li>
                            <li>Conducted comprehensive testing and debugging across UI, database, and processing components to ensure product reliability.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects">
            <div class="section-content-wrapper">
                <h2>Our Projects</h2>
            <div class="projects-grid">
                <div class="project-card">
                    <img src="agency.jpg" alt="Polybius Project Image">
                    <h3>Polybius</h3>
                    <div class="project-description">
                        <p class="short-desc"><strong>Polybius Summary</strong><br>Polybius is a powerful software tool designed to streamline video game localization for projects developed in the Godot game engine. Named after the Greek historian Polybius, renowned for his detailed accounts of diverse cultures and languages.</p>
                    </div>
                    <a href="polybius.html" class="learn-more-btn project-link">Learn more</a>
                </div>
                <div class="project-card">
                    <img src="HaikuNews7.png" alt="HaikuNews7 Project Image">
                    <h3>HaikuNews7</h3>
                    <div class="project-description">
                        <p class="short-desc"><strong>Project Summary: HaikuNews7</strong><br>Overview: HaikuNews7 is an innovative, under-construction personal portfolio project that blends automation, art, and storytelling to deliver unique social media content. Leveraging n8n for workflow automation and Perplexity for real-time data scraping.</p>
                    </div>
                    <a href="haikunews7.html" class="learn-more-btn project-link">Learn more</a>
                </div>
                <div class="project-card">
                    <img src="projects.jpg" alt="MK-ULTRA Psychic Defense Project Image">
                    <h3>MK-ULTRA Psychic Defense</h3>
                    <div class="project-description">
                        <p class="short-desc"><strong>MK-ULTRA Psychic Defense Summary</strong><br>MK-ULTRA Psychic Defense is a rogue-like tower defense game on Steam, released on December 2, 2024. In this psychedelic-themed game, you play as a young Ted Kaczynski, navigating the horrors of the CIA's MK-ULTRA program.</p>
                    </div>
                    <a href="mkultra.html" class="learn-more-btn project-link">Learn more</a>
                </div>
            </div>
            </div>
        </section>
    <!-- </main> tag removed -->

    <footer id="contact">
        <!-- <div class="section-content-wrapper"> removed -->
            <p>&copy; 2025 ZeroSequels. All rights reserved.</p>
        <!-- </div> removed -->
    </footer>

    <script>
        // --- Configuration ---
        const USE_SHADER_BACKGROUND = false; // DEFAULT: false. SET TO true TO TEST SHADERS.

        // --- Element References ---
        const bgLayer1 = document.getElementById('bgLayer1');
        const bgLayer2 = document.getElementById('bgLayer2');
        const shaderCanvas = document.getElementById('shaderCanvas');
        
        // --- State Variables ---
        let activeImageLayer = bgLayer1;
        let inactiveImageLayer = bgLayer2;
        let currentBgImageURL = ""; 

        // --- Three.js Variables ---
        let threeRenderer, threeScene, threeCamera, threePlaneMesh, threeShaderMaterial, threeClock, animationFrameId;
        let heroFragShaderContent = '', passthroughVertShaderContent = ''; // Renamed to avoid conflict

        // --- Data for Sections ---
        const sectionsToObserve = [ // shaderEffect now just for logging, as we only load heroShader
            { id: 'home', image: "url('oop.jpg')", shaderEffect: 'heroShaderEffect' }, 
            { id: 'about', image: "url('oop.jpg')", shaderEffect: 'heroShaderEffect' },
            { id: 'developer', image: "url('waves.jpg')", shaderEffect: 'heroShaderEffect' }, 
            { id: 'projects', image: "url('waves.jpg')", shaderEffect: 'heroShaderEffect' }
        ];
        
        // --- Shader Management ---
        let currentActiveShaderEffectName = null; // Tracks the name of the active effect for logging
        const SHADER_TRANSITION_DURATION = 500; // ms

        async function fetchShaders() {
            try {
                const [heroFragResponse, passthroughVertResponse] = await Promise.all([
                    fetch('heroShader.frag'),
                    fetch('passthrough.vert')
                ]);
                if (!heroFragResponse.ok) throw new Error(`Failed to fetch heroShader.frag: ${heroFragResponse.statusText}`);
                if (!passthroughVertResponse.ok) throw new Error(`Failed to fetch passthrough.vert: ${passthroughVertResponse.statusText}`);
                
                heroFragShaderContent = await heroFragResponse.text();
                passthroughVertShaderContent = await passthroughVertResponse.text();
                console.log("Shaders fetched successfully.");
            } catch (error) {
                console.error("Error fetching shaders:", error);
                // Prevent further Three.js initialization if shaders fail to load
                heroFragShaderContent = ''; 
                passthroughVertShaderContent = '';
            }
        }

        function initThreeJS() {
            // Guard against re-initialization or initialization without loaded shaders
            if (threeRenderer) return; 
            if (!heroFragShaderContent || !passthroughVertShaderContent) {
                console.warn("Shaders not loaded. Three.js initialization aborted.");
                return;
            }
            console.log("Initializing Three.js...");

            try {
                threeClock = new THREE.Clock();
                threeRenderer = new THREE.WebGLRenderer({ canvas: shaderCanvas, antialias: true, alpha: true });
                threeRenderer.setSize(window.innerWidth, window.innerHeight);
                threeRenderer.setPixelRatio(window.devicePixelRatio);

                threeScene = new THREE.Scene();
                // Orthographic camera for full-screen 2D plane
                threeCamera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0.1, 10);

                const geometry = new THREE.PlaneGeometry(2, 2); // Covers the ortho view
                threeShaderMaterial = new THREE.ShaderMaterial({
                    vertexShader: passthroughVertShaderContent,
                    fragmentShader: heroFragShaderContent,
                    uniforms: {
                        u_time: { value: 0.0 },
                        u_resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
                    },
                    transparent: true // Allows canvas alpha to work if shader outputs alpha
                });
                threePlaneMesh = new THREE.Mesh(geometry, threeShaderMaterial);
                threeScene.add(threePlaneMesh);

                window.addEventListener('resize', onWindowResize, false);
                console.log("Three.js initialized successfully.");
            } catch (error) {
                console.error("Error during Three.js initialization:", error);
                threeRenderer = null; // Ensure it's marked as not initialized on error
            }
        }

        function onWindowResize() {
            if (!threeRenderer) return;
            // For OrthographicCamera, viewport dimensions are usually managed by renderer.setSize
            // and shader uniforms if needed, not camera aspect.
            threeRenderer.setSize(window.innerWidth, window.innerHeight);
            if (threeShaderMaterial) {
                threeShaderMaterial.uniforms.u_resolution.value.set(window.innerWidth, window.innerHeight);
            }
            console.log("Three.js renderer resized.");
        }

        function animateThreeJS() {
            if (!threeRenderer || !animationFrameId) return; // Stop if deactivated or loop already stopped

            animationFrameId = requestAnimationFrame(animateThreeJS);
            
            if (threeShaderMaterial && threeClock) {
                threeShaderMaterial.uniforms.u_time.value = threeClock.getElapsedTime();
            }
            threeRenderer.render(threeScene, threeCamera);
            // console.log("Three.js animate loop frame"); // Uncomment for verbose logging
        }

        function startThreeJSAnimation() {
            if (!animationFrameId && threeRenderer) {
                console.log("Starting Three.js animation loop.");
                animateThreeJS();
            }
        }

        function stopThreeJSAnimation() {
            if (animationFrameId) {
                console.log("Stopping Three.js animation loop.");
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
        }

        function activateShader(shaderEffectName) { 
            console.log(`Activating shader mode for effect: ${shaderEffectName}`);
            if (!heroFragShaderContent || !passthroughVertShaderContent) {
                console.warn("Cannot activate shader: Shader content not loaded.");
                return;
            }
            
            if (!threeRenderer) {
                initThreeJS();
                if (!threeRenderer) { // Check if initThreeJS failed
                     console.error("Three.js context could not be initialized. Shader activation failed.");
                     return;
                }
            }
            
            // Ensure image layers are hidden
            bgLayer1.style.display = 'none';
            bgLayer2.style.display = 'none';

            shaderCanvas.style.display = 'block';
            // Fade in canvas
            requestAnimationFrame(() => { // Ensure display:block is applied
                shaderCanvas.style.opacity = '1';
            });
            
            startThreeJSAnimation();
            currentActiveShaderEffectName = shaderEffectName;
        }

        function deactivateShader() { 
            console.log("Deactivating shader mode.");
            stopThreeJSAnimation();
            shaderCanvas.style.opacity = '0';
            setTimeout(() => {
                // Only hide if still meant to be deactivated (e.g., not immediately reactivated)
                if (!USE_SHADER_BACKGROUND || currentActiveShaderEffectName === null) { 
                    shaderCanvas.style.display = 'none';
                }
            }, SHADER_TRANSITION_DURATION);
            currentActiveShaderEffectName = null;
        }

        // --- Image Background Management (remains mostly the same) ---
        function initializeImageBackgrounds() {
            const initialSectionData = sectionsToObserve.find(s => s.id === 'home');
            if (initialSectionData) {
                activeImageLayer.style.backgroundImage = initialSectionData.image;
                activeImageLayer.style.transform = 'translateY(0%)';
                activeImageLayer.style.opacity = '1';
                
                inactiveImageLayer.style.transform = 'translateY(100%)';
                inactiveImageLayer.style.opacity = '0';
                currentBgImageURL = initialSectionData.image;
            }
            bgLayer1.style.display = 'block';
            bgLayer2.style.display = 'block';
        }

        function transitionImageBackground(newImageURL) {
            if (newImageURL === currentBgImageURL) return; 

            inactiveImageLayer.style.backgroundImage = newImageURL;
            inactiveImageLayer.style.transition = 'none'; 
            inactiveImageLayer.style.transform = 'translateY(100%)';
            inactiveImageLayer.style.opacity = '1'; 

            void inactiveImageLayer.offsetHeight; 

            const transitionStyle = 'transform 1s cubic-bezier(0.42, 0, 0.58, 1), opacity 0.5s ease-out 0.5s';
            activeImageLayer.style.transition = transitionStyle;
            inactiveImageLayer.style.transition = transitionStyle;
            
            activeImageLayer.style.transform = 'translateY(-100%)'; 
            activeImageLayer.style.opacity = '0'; 
            
            inactiveImageLayer.style.transform = 'translateY(0%)';   

            [activeImageLayer, inactiveImageLayer] = [inactiveImageLayer, activeImageLayer];
            currentBgImageURL = newImageURL;
        }
        
        // --- Main Setup on DOMContentLoaded ---
        async function mainSetup() {
            // Project card functionality removed as per new requirements
            
            // Now handle background setup
            await fetchShaders();

            if (USE_SHADER_BACKGROUND) {
                activateShader(sectionsToObserve.find(s => s.id === 'home')?.shaderEffect || 'heroShaderEffect');
            } else {
                initializeImageBackgrounds();
                deactivateShader(); 
            }

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.5 
            };

            const sectionObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionData = sectionsToObserve.find(s => s.id === entry.target.id);
                        if (sectionData) {
                            if (USE_SHADER_BACKGROUND) {
                                activateShader(sectionData.shaderEffect);
                            } else {
                                deactivateShader(); // Ensure shader is off if switching back
                                initializeImageBackgrounds(); // Re-assert image layers are visible
                                transitionImageBackground(sectionData.image);
                            }
                        }
                    } else { // Entry is not intersecting
                        // Optional: If you want shaders to deactivate when no specific section is 50% visible
                        // if (USE_SHADER_BACKGROUND && entry.target.id === currentActiveShaderEffectName) {
                        //     // This logic might be too aggressive if scrolling quickly
                        // }
                    }
                });
            }, observerOptions);

            sectionsToObserve.forEach(sectionConfig => {
                const element = document.getElementById(sectionConfig.id);
                if (element) {
                    sectionObserver.observe(element);
                }
            });
        }
        
        // DOMContentLoaded ensures Three.js is available if loaded via script tag in head
        document.addEventListener('DOMContentLoaded', mainSetup);
    </script>
</body>
</html>
